<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Add Parcel</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="parcelForm" (ngSubmit)="submit()">
    <!-- Sender Section -->
    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>Sender Information</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-item class="input-item">
          <ion-label position="floating">Sender Name</ion-label>
          <ion-input formControlName="senderName"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('senderName')?.touched && parcelForm.get('senderName')?.hasError('pattern')">
          Name should contain only alphabets.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Sender Contact</ion-label>
          <ion-input formControlName="senderContact" type="tel"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('senderContact')?.touched && parcelForm.get('senderContact')?.hasError('pattern')">
          Contact should contain only numbers.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Sender Email</ion-label>
          <ion-input formControlName="senderEmail" type="email"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('senderEmail')?.touched && parcelForm.get('senderEmail')?.hasError('email')">
          Please enter a valid email.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Sender Address</ion-label>
          <ion-textarea formControlName="senderAddress" rows="3"></ion-textarea>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Receiver Section -->
    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>Receiver Information</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-item class="input-item">
          <ion-label position="floating">Receiver Name</ion-label>
          <ion-input formControlName="receiverName"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('receiverName')?.touched && parcelForm.get('receiverName')?.hasError('pattern')">
          Name should contain only alphabets.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Receiver Contact</ion-label>
          <ion-input formControlName="receiverContact" type="tel"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('receiverContact')?.touched && parcelForm.get('receiverContact')?.hasError('pattern')">
          Contact should contain only numbers.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Receiver Email</ion-label>
          <ion-input formControlName="receiverEmail" type="email"></ion-input>
        </ion-item>
        <ion-text class="error-text" color="danger" *ngIf="parcelForm.get('receiverEmail')?.touched && parcelForm.get('receiverEmail')?.hasError('email')">
          Please enter a valid email.
        </ion-text>
        <ion-item class="input-item">
          <ion-label position="floating">Receiver Address</ion-label>
          <ion-textarea formControlName="receiverAddress" rows="3"></ion-textarea>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Pickup Section -->
    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>Pickup Information</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-item class="input-item">
          <ion-label position="floating">Pickup Location</ion-label>
          <div class="input-with-button">
            <ion-input formControlName="pickupLocation" class="location-input"></ion-input>
            <ion-button fill="clear" size="small" (click)="getDeviceLocation()" [disabled]="isGettingLocation">
              <ion-icon name="location-outline" [color]="isGettingLocation ? 'medium' : 'primary'"></ion-icon>
            </ion-button>
          </div>
        </ion-item>
        <ion-item class="input-item">
          <ion-label position="floating">Date</ion-label>
          <ion-input formControlName="date" type="date"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <ion-button class="primary-button" expand="block" type="submit" [disabled]="parcelForm.invalid || isGettingLocation">
      Submit
    </ion-button>
  </form>
</ion-content>
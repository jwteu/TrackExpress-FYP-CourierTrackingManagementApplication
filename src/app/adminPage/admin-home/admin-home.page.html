<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<ion-menu contentId="main-content" side="start" class="modern-menu">
  <ion-content class="menu-content">
    <!-- Enhanced User Profile Section -->
    <div class="user-profile-section">
      <div class="background-decoration"></div>
      <div class="user-avatar-container">
        <div class="user-avatar">
          <img src="assets/icon/logo-removebg-preview.png" alt="App Logo" class="avatar-image">
        </div>
        <div class="avatar-border"></div>
      </div>
      <h3 class="user-name">{{ userName }}</h3>
      <div class="user-role">Administrator</div>
    </div>

    <!-- Menu Options -->
    <div class="menu-options">
      <ion-list lines="none">
        <ion-item button detail="false" (click)="navigateTo('profile')" class="menu-item">
          <ion-icon slot="start" name="person-circle-outline"></ion-icon>
          <ion-label>Profile</ion-label>
        </ion-item>
        <ion-item button detail="false" (click)="logout()" class="menu-item">
          <ion-icon slot="start" name="log-out-outline"></ion-icon>
          <ion-label>Logout</ion-label>
        </ion-item>
        <!-- Add more menu items as needed -->
      </ion-list>
    </div>

    <!-- Footer -->
    <div class="menu-footer">
      <img src="assets/icon/logo-removebg-preview.png" alt="TrackXpress" class="menu-logo">
      <div class="app-name">TrackExpress</div>
    </div>
  </ion-content>
</ion-menu>

<!-- Main Content -->
<div class="ion-page" id="main-content">
  <ion-header class="ion-no-border"> <!-- Remove default border -->
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button auto-hide="false"></ion-menu-button> <!-- Ensure button is always visible -->
      </ion-buttons>
      <ion-title>Dashboard</ion-title> <!-- Changed title for context -->
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <div class="container">
      <div class="welcome-message">
        <h2>Welcome back, {{ userName }}!</h2>
        <p class="subtitle">Here's a quick overview of today.</p> <!-- Updated subtitle -->
      </div>

      <!-- Stats Card Section -->
      <div class="stats-card">
        <div class="stat-item">
          <ion-icon name="cube-outline" class="stat-icon"></ion-icon>
          <div class="stat-value">
            <ion-spinner *ngIf="loadingPending" name="dots" color="medium"></ion-spinner>
            <span *ngIf="!loadingPending">{{ pendingParcelsCount }}</span>
          </div>
          <!-- Change the text in the line below -->
          <div class="stat-label">Processing</div> <!-- Changed from "In Transit Parcel" -->
        </div>
        <div class="stat-item">
          <ion-icon name="checkmark-done-outline" class="stat-icon"></ion-icon>
          <div class="stat-value">
            <ion-spinner *ngIf="loadingDelivered" name="dots" color="medium"></ion-spinner>
            <span *ngIf="!loadingDelivered">{{ deliveredTodayCount }}</span>
          </div>
          <div class="stat-label">Delivered Today</div>
        </div>
        <div class="stat-item">
          <ion-icon name="people-outline" class="stat-icon"></ion-icon>
          <div class="stat-value">
            <ion-spinner *ngIf="loadingDeliverymen" name="dots" color="medium"></ion-spinner>
            <span *ngIf="!loadingDeliverymen">{{ activeDeliverymenCount }}</span>
          </div>
          <div class="stat-label">Active Deliverymen</div>
        </div>
      </div>

      <!-- Action Buttons Card -->
      <div class="action-card">
         <h3 class="card-title">Quick Actions</h3> <!-- Add title to action card -->
        <ion-button expand="block" class="primary-button" (click)="navigateTo('manage-parcel')">
          <ion-icon slot="start" name="create-outline"></ion-icon> <!-- Changed icon -->
          Manage Parcels
        </ion-button>
        <ion-button expand="block" class="primary-button" (click)="navigateTo('tracking-parcel')">
          <ion-icon slot="start" name="search-outline"></ion-icon> <!-- Changed icon -->
          Track Parcels
        </ion-button>
        <!-- Add more buttons inside this card if needed -->
      </div>

    </div>
  </ion-content>
</div>